(()=>{"use strict";var e={192:(e,t,n)=>{n.d(t,{Z:()=>h});var r=n(81),o=n.n(r),i=n(645),a=n.n(i),s=n(667),c=n.n(s),d=new URL(n(760),n.b),l=new URL(n(135),n.b),u=new URL(n(741),n.b),m=new URL(n(78),n.b),p=a()(o());p.push([e.id,"@import url(https://fonts.googleapis.com/css2?family=Lexend+Deca:wght@200;400;700&display=swap);"]);var g=c()(d),v=c()(l),b=c()(u),f=c()(m);p.push([e.id,".blackout .text-message .close-button,.tab-button,.section .button{padding:0;border:0;background-color:rgba(0,0,0,0);font-family:inherit}.cars-list{padding:0;list-style:none}.blackout .text-message .close-button,.tab-button,.section .button{cursor:pointer;transition:.5s}.winners-list tbody td:nth-child(2),.cars-list .cars-list__item .car__image{-webkit-mask-image:url("+g+");-webkit-mask-size:100%;-webkit-mask-repeat:no-repeat;-webkit-mask-position:center;mask-image:url("+g+');mask-size:100%;mask-repeat:no-repeat;mask-position:center;background-color:#000}.winners-list th.descending,.winners-list th.ascending{padding-right:30px !important;background-position:bottom 50% right 5px;background-repeat:no-repeat;background-size:15px 15px}html{box-sizing:border-box;scroll-behavior:smooth}*,*::before,*::after{box-sizing:inherit}body{margin:0;background-color:#d9d9d9;font-family:"Lexend Deca",sans-serif;color:#212121}.section{position:absolute;width:100%;padding:20px;opacity:0}.section.section_visible{z-index:10;opacity:1}.section .button{display:inline-block;padding:5px;border-radius:1px;background-color:#faa357}.section .button:hover{background-color:#fff}.section .button[disabled=true]:hover{background-color:#faa357;cursor:default}.tabs{width:100%;height:5vh;background-color:#fff}.tab-button{width:100px;height:100%}.tab-button.tab-button_active{background-color:#d9d9d9}.section__header{display:grid;grid-template-columns:repeat(3, 1fr);justify-content:space-between;gap:15px 5px;width:300px}.form{display:flex;justify-content:space-between;width:100%}.form .form__color-input{border:0}.create-form,.update-form{grid-column:1/4}.cars-list .cars-list__item{position:relative;display:grid;grid-template-columns:repeat(2, max-content);gap:10px;margin-bottom:10px;border-bottom:#b0b0b0 2px dashed;background-image:url('+v+');background-repeat:no-repeat;background-position:bottom 0 right 80px;background-size:contain}.cars-list .cars-list__item .car__image{width:100px;height:30px}.cars-list .cars-list__item .car__finish-point{position:absolute;bottom:0;right:0;width:100px;height:30px}.cars-list .cars-list__item .control-buttons{display:grid;grid-template-columns:repeat(2, 1fr);gap:5px;grid-row:1/3}.cars-list .cars-list__item .control-buttons .button{border:rgba(0,0,0,0) 2px solid;background-color:#fff}.cars-list .cars-list__item .control-buttons .button:hover{border:#b0b0b0 2px solid}.cars-list .cars-list__item .control-buttons .button[disabled=true]:hover{border:rgba(0,0,0,0) 2px solid;cursor:default}.pagination{display:flex;gap:10px}.blackout{position:fixed;top:0;left:0;z-index:20;display:flex;justify-content:center;align-items:center;width:100vw;height:100vh;background-color:rgba(33,33,33,.5)}.blackout .text-message{position:relative;display:flex;justify-content:center;align-items:center;width:300px;height:200px;padding:10px;border-radius:5px;background-color:#d9d9d9;color:inherit;text-align:center}.blackout .text-message .close-button{position:absolute;top:0;right:0;width:20px;height:20px}.blackout .text-message .close-button::before{content:"X"}.winners-list{margin:16px 0;border:#b0b0b0 1px solid;border-collapse:collapse}.winners-list tr{padding:10px}.winners-list th{background-color:#b0b0b0}.winners-list th.ascending{background-image:url('+b+")}.winners-list th.descending{background-image:url("+f+")}.winners-list th.car-wins,.winners-list th.car-time{cursor:pointer}.winners-list th,.winners-list td{padding:10px}.winners-list tr:nth-child(even){background-color:#fff}",""]);const h=p},645:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,r,o,i){"string"==typeof e&&(e=[[null,e,void 0]]);var a={};if(r)for(var s=0;s<this.length;s++){var c=this[s][0];null!=c&&(a[c]=!0)}for(var d=0;d<e.length;d++){var l=[].concat(e[d]);r&&a[l[0]]||(void 0!==i&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=i),n&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=n):l[2]=n),o&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=o):l[4]="".concat(o)),t.push(l))}},t}},667:e=>{e.exports=function(e,t){return t||(t={}),e?(e=String(e.__esModule?e.default:e),/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]|(%20)/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e):e}},81:e=>{e.exports=function(e){return e[1]}},379:e=>{var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var i={},a=[],s=0;s<e.length;s++){var c=e[s],d=r.base?c[0]+r.base:c[0],l=i[d]||0,u="".concat(d," ").concat(l);i[d]=l+1;var m=n(u),p={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==m)t[m].references++,t[m].updater(p);else{var g=o(p,r);r.byIndex=s,t.splice(s,0,{identifier:u,updater:g,references:1})}a.push(u)}return a}function o(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,o){var i=r(e=e||[],o=o||{});return function(e){e=e||[];for(var a=0;a<i.length;a++){var s=n(i[a]);t[s].references--}for(var c=r(e,o),d=0;d<i.length;d++){var l=n(i[d]);0===t[l].references&&(t[l].updater(),t.splice(l,1))}i=c}}},569:e=>{var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},216:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},565:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},795:e=>{e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var o=void 0!==n.layer;o&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,o&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var i=n.sourceMap;i&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},589:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},741:(e,t,n)=>{e.exports=n.p+"4ceca2ce51d09099ca23.svg"},78:(e,t,n)=>{e.exports=n.p+"b837164b98be0c8727af.svg"},760:(e,t,n)=>{e.exports=n.p+"d891345da34205e4866c.svg"},135:(e,t,n)=>{e.exports=n.p+"bd00d269f0033e6a4805.svg"}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={id:r,exports:{}};return e[r](i,i.exports,n),i.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");r.length&&(e=r[r.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})(),n.b=document.baseURI||self.location.href,n.nc=void 0,(()=>{var e=n(379),t=n.n(e),r=n(795),o=n.n(r),i=n(569),a=n.n(i),s=n(565),c=n.n(s),d=n(216),l=n.n(d),u=n(589),m=n.n(u),p=n(192),g={};g.styleTagTransform=m(),g.setAttributes=c(),g.insert=a().bind(null,"head"),g.domAPI=o(),g.insertStyleElement=l(),t()(p.Z,g),p.Z&&p.Z.locals&&p.Z.locals;const v="http://127.0.0.1:3000",b="garage",f="engine",h="winners",y="/",x=10,w={garage:"GARAGE",winners:"WINNERS",create:"CREATE",update:"UPDATE",race:"RACE",reset:"RESET",generate:"GENERATE CARS",select:"SELECT",remove:"REMOVE",start:"START",stop:"STOP",previous:"PREVIOUS",next:"NEXT"},_=["â„–","Car","Name","Wins","Best time (sec)"],E=["number","car-image","car-name","car-wins","car-time"],A=["Acura","Alfa Romeo","Audi","BMW","Bentley","Cadillac","Chevrolet","Dodge","Fiat","Ford","Honda","Hyundai","Jeep","Kia","Lincoln","Mazda","Mercedes-Benz","Nissan","Porsche","Subaru","Tesla","Toyota","Volkswagen","Volvo"],S=["X5","Cayenne","Polo","CX-5","Passat","Ulysse","Panamera","Zafira","Vito","Meteor","Escalade","Accent","Rio","Impreza"],C="",k='Race in progress. Wait for the end of the race and click "RESET" or click "RESET" immediately not to wait for the end';var N,T,P;!function(e){e[e.Zero=0]="Zero",e[e.One=1]="One",e[e.Three=3]="Three",e[e.Six=6]="Six"}(N||(N={})),function(e){e.GET="GET",e.POST="POST",e.PUT="PUT",e.PATCH="PATCH",e.DELETE="DELETE"}(T||(T={})),function(e){e[e.Ok=200]="Ok",e[e.Created=201]="Created",e[e.BadRequest=400]="BadRequest",e[e.NotFound=404]="NotFound",e[e.TooManyRequests=429]="TooManyRequests",e[e.InternalServerError=500]="InternalServerError"}(P||(P={}));const O=(e,t,n,r)=>{const o=n?`/${n}`:y;return r?`${e}/${t}${o}${(e=>`?${Object.entries(e).map((e=>`${e[N.Zero]}=${e[N.One]}`)).join("&")}`)(r)}`:`${e}/${t}${o}`};var R=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};const L=e=>t=>R(void 0,void 0,void 0,(function*(){const n=yield fetch(O(v,e,void 0,t));return{content:yield n.json(),totalAmount:n.headers.get("X-Total-Count")}})),M=e=>t=>R(void 0,void 0,void 0,(function*(){return(yield fetch(O(v,e,t))).json()})),q=e=>t=>R(void 0,void 0,void 0,(function*(){return(yield fetch(O(v,e),{method:T.POST,headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).json()})),I=e=>t=>R(void 0,void 0,void 0,(function*(){return(yield fetch(O(v,e,t),{method:T.DELETE})).json()})),$=e=>(t,n)=>R(void 0,void 0,void 0,(function*(){return(yield fetch(O(v,e,t),{method:T.PUT,headers:{"Content-Type":"application/json"},body:JSON.stringify(n)})).json()})),j=e=>t=>R(void 0,void 0,void 0,(function*(){return(yield fetch(O(v,f,void 0,{id:t,status:e}),{method:T.PATCH})).json()})),B=e=>t=>R(void 0,void 0,void 0,(function*(){return!!(yield(yield fetch(O(v,e))).json()).find((e=>e.id===Number(t)))})),W={getCars:L(b),getWinners:L(h),getCarById:M(b),getWinnerById:M(h),createCar:q(b),createWinner:q(h),deleteCar:I(b),deleteWinner:I(h),updateCar:$(b),updateWinner:$(h),startEngine:j("started"),stopEngine:j("stopped"),switchEngineToDriveMode:e=>R(void 0,void 0,void 0,(function*(){const t=yield fetch(O(v,f,void 0,{id:e,status:"drive"}),{method:T.PATCH});return t.status===P.Ok?t.json():{success:!1}})),isCarExist:B(b),isWinnerExist:B(h)},Z={cars:[],winners:[],carsAmount:N.Zero,winnersAmount:N.Zero,garageCurrentPage:N.One,winnersCurrentPage:N.One,animate:{},sortKey:"id",sortOrder:"ASC",isRaceStarted:!1},D=e=>{e.target.closest(".blackout").remove()},U=e=>{const t=ve({tag:"button",classNames:["close-button"],listenerInfo:{eventName:"click",callback:D}}),n=be({tag:"div",classNames:["text-message"],innerText:e,children:[t]}),r=be({tag:"div",classNames:["blackout"],children:[n]});document.body.append(r)},F=()=>{let e="#";for(let t=N.Zero;t<N.Six;t+=N.One)e+=`${Math.floor(16*Math.random()).toString(16)}`;return e},z=()=>{return{name:(e=A,t=S,`${e[Math.floor(Math.random()*e.length)]} ${t[Math.floor(Math.random()*t.length)]}`),color:F()};var e,t},H=(e,t)=>`${e}(${t})`,G=e=>`Page #${e}`;var X=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};const K=e=>({name:e.text.value,color:e.color.value}),V=()=>{document.querySelector(".cars-list").innerHTML=C},J=(e,t,n)=>{const r=e.querySelector(".previous-button"),o=e.querySelector(".next-button");[r,o].forEach((e=>e.removeAttribute("disabled"))),t<=N.One&&r.setAttribute("disabled","true"),t>=n&&o.setAttribute("disabled","true")},Q=()=>X(void 0,void 0,void 0,(function*(){const e=yield W.getCars({_page:Z.garageCurrentPage,_limit:7});[Z.cars,Z.carsAmount]=[e.content,Number(e.totalAmount)];const t=document.getElementById("garage");document.querySelector(".garage__title").textContent=H("GARAGE",e.totalAmount),document.querySelector(".garage__page-number").textContent=G(Z.garageCurrentPage),document.querySelector(".cars-list").append(...e.content.map(we)),J(t.querySelector(".pagination"),Z.garageCurrentPage,Math.ceil(Z.carsAmount/7))})),Y=()=>X(void 0,void 0,void 0,(function*(){var e;const t=yield W.getWinners({_page:Z.winnersCurrentPage,_limit:x,_sort:Z.sortKey,_order:Z.sortOrder}),n=yield Promise.all(t.content.map((e=>X(void 0,void 0,void 0,(function*(){return Object.assign(e,yield W.getCarById(String(e.id)))})))));[Z.winners,Z.winnersAmount]=[t.content,Number(t.totalAmount)];const r=document.getElementById("winners");document.querySelector(".winners__title").textContent=H("WINNERS",t.totalAmount),document.querySelector(".winners__page-number").textContent=G(Z.winnersCurrentPage);const o=document.querySelector(".winners-list");null===(e=o.lastChild)||void 0===e||e.remove(),o.append(Ae(n)),J(r.querySelector(".pagination"),Z.winnersCurrentPage,Math.ceil(Z.winnersAmount/x))})),ee=e=>X(void 0,void 0,void 0,(function*(){if(e.preventDefault(),Z.isRaceStarted)return void U(k);const t=e.target;t.text.value.trim()!==C?(yield W.createCar(K(t)),t.reset(),V(),yield Q()):U("Please, enter a name")})),te=e=>X(void 0,void 0,void 0,(function*(){if(e.preventDefault(),Z.isRaceStarted)return void U(k);const t=e.target;t.hasAttribute("data-current-id")?(yield W.updateCar(t.dataset.currentId,K(t)),t.reset(),t.removeAttribute("data-current-id"),V(),yield Q()):U("Please, select a car")})),ne=e=>X(void 0,void 0,void 0,(function*(){if(Z.isRaceStarted)return void U(k);const t=document.querySelector(".update-form"),n=e.target.closest(".car").id,r=yield W.getCarById(n);t.dataset.currentId=n,t.text.value=r.name,t.color.value=r.color})),re=e=>X(void 0,void 0,void 0,(function*(){if(Z.isRaceStarted)return void U(k);const t=e.target.closest(".car").id;yield W.deleteCar(t),(yield W.isWinnerExist(t))&&(yield W.deleteWinner(t)),V(),yield Q(),yield Y()})),oe=e=>X(void 0,void 0,void 0,(function*(){const t=e;t.querySelector(".start-button").setAttribute("disabled","true");const n=t.querySelector(".car__start-point"),r=t.querySelector(".car__finish-point"),o=yield W.startEngine(Number(t.id));t.querySelector(".stop-button").removeAttribute("disabled");const i=o.distance/o.velocity;var a,s;const c=((e,t,n)=>{const r=e;let o=N.Zero;const i={value:N.Zero},a=e=>{o||(o=e);const s=e-o,c=Math.floor(s*t/n);r.style.transform=`translateX(${Math.min(c,t)}px)`,c<t&&(i.value=window.requestAnimationFrame(a))};return i.value=window.requestAnimationFrame(a),i})(n,(a=n,s=r,Math.abs(a.getBoundingClientRect().x-s.getBoundingClientRect().x)),i);Z.animate[t.id]=c;const{success:d}=yield W.switchEngineToDriveMode(Number(t.id));return d?{success:d,id:t.id,time:+(i/1e3).toFixed(N.Three)}:(window.cancelAnimationFrame(c.value),{success:d,id:t.id})})),ie=e=>X(void 0,void 0,void 0,(function*(){const t=e.target.closest(".car");yield oe(t)})),ae=e=>X(void 0,void 0,void 0,(function*(){e.target.setAttribute("disabled","true");const t=e.target.closest(".car"),n=t.querySelector(".car__image");yield W.stopEngine(Number(t.id)),window.cancelAnimationFrame(Z.animate[t.id].value),n.style.transform=C,t.querySelector(".start-button").removeAttribute("disabled")})),se=()=>X(void 0,void 0,void 0,(function*(){Z.isRaceStarted?U(k):(yield Promise.all(new Array(100).fill(z).map((e=>W.createCar(e())))),V(),yield Q())})),ce=(e,t)=>X(void 0,void 0,void 0,(function*(){const n=yield Promise.race(e);if(!n.success){const r=e.filter(((e,r)=>t[r]!==n.id));return ce(r,t.filter((e=>e!==n.id)))}return n})),de=()=>X(void 0,void 0,void 0,(function*(){var e,t;null===(e=document.querySelector(".race-button"))||void 0===e||e.setAttribute("disabled","true"),null===(t=document.querySelector(".reset-button"))||void 0===t||t.removeAttribute("disabled"),Z.isRaceStarted=!0;const n=Array.from(document.querySelectorAll(".car")),r=n.map(oe),{success:o,id:i,time:a}=yield ce(r,n.map((e=>e.id)));if(o&&(yield W.isCarExist(i))){if(yield W.isWinnerExist(i)){const{wins:e,time:t}=yield W.getWinnerById(i),n=e+N.One,r=t<a?t:a;yield W.updateWinner(i,{wins:n,time:r})}else yield W.createWinner({id:Number(i),wins:N.One,time:a});U(`The winner is ${(yield W.getCarById(i)).name} (${a}s)`),yield Y()}})),le=()=>{var e,t;null===(e=document.querySelector(".reset-button"))||void 0===e||e.setAttribute("disabled","true"),null===(t=document.querySelector(".race-button"))||void 0===t||t.removeAttribute("disabled"),Z.isRaceStarted=!1,document.querySelectorAll(".car").forEach((e=>{var t;return null===(t=e.querySelector(".stop-button"))||void 0===t?void 0:t.dispatchEvent(new Event("click"))}))},ue=e=>X(void 0,void 0,void 0,(function*(){const t=e.target;if(!t.classList.contains("car-wins")&&!t.classList.contains("car-time"))return;const n="ASC"===t.dataset.order?"DESC":"ASC";t.dataset.order=n,document.querySelectorAll("th").forEach((e=>e.classList.remove("ascending","descending"))),t.classList.add("ASC"===n?"ascending":"descending"),t.classList.contains("car-wins")?(Z.sortKey="wins",Z.sortOrder=n):t.classList.contains("car-time")&&(Z.sortKey="time",Z.sortOrder=n),yield Y()})),me=e=>X(void 0,void 0,void 0,(function*(){const t=e.target;t instanceof HTMLButtonElement&&(Z.isRaceStarted?U(k):(t.classList.contains("next-button")&&(Z.garageCurrentPage+=N.One),t.classList.contains("previous-button")&&(Z.garageCurrentPage-=N.One),V(),yield Q(),J(t.closest(".pagination"),Z.garageCurrentPage,Math.ceil(Z.carsAmount/7))))})),pe=e=>X(void 0,void 0,void 0,(function*(){const t=e.target;t instanceof HTMLButtonElement&&(t.classList.contains("next-button")&&(Z.winnersCurrentPage+=N.One),t.classList.contains("previous-button")&&(Z.winnersCurrentPage-=N.One),yield Y(),J(t.closest(".pagination"),Z.winnersCurrentPage,Math.ceil(Z.winnersAmount/x)))})),ge=e=>{var t;if(!e.target.classList.contains("tab-button"))return;const n=e.target;document.querySelectorAll(".tab-button").forEach((e=>e.classList.remove("tab-button_active"))),n.classList.add("tab-button_active"),document.querySelectorAll("section").forEach((e=>{e.classList.remove("section_visible")})),document.getElementById(null===(t=n.textContent)||void 0===t?void 0:t.toLowerCase()).classList.add("section_visible")},ve=e=>{const{tag:t,classNames:n,innerText:r=C,listenerInfo:o,attributeInfo:i}=e,a=document.createElement(t);return a.classList.add(...n),a.textContent=r,void 0!==o&&a.addEventListener(o.eventName,o.callback),void 0!==i&&a.setAttribute(i[N.Zero],i[N.One]),a},be=e=>{const{children:t=[],id:n}=e,r=ve(e);return r.append(...t),void 0!==n&&(r.id=n),r},fe=(e,t,n,r=C)=>{const o=document.createElement("input");return o.type=e,o.name=n,o.classList.add(t),"text"===e&&(o.placeholder=r,o.setAttribute("autocomplete","off")),o},he=(e,t,n)=>ve({tag:"button",classNames:["button",`${e}-button`],innerText:w[e],listenerInfo:t,attributeInfo:n}),ye=(e,t,n)=>{const r=he("previous");t===N.One&&r.setAttribute("disabled","true");const o=he("next");return t===n&&o.setAttribute("disabled","true"),be({tag:"div",classNames:["pagination"],children:[r,o],listenerInfo:{eventName:"click",callback:e}})},xe=(e,t)=>be({tag:"form",classNames:["form",`${e}-form`],children:[fe("text","form__text-input","text","create"===e?"Enter car name":"Select car to update"),fe("color","form__color-input","color"),he(e)],listenerInfo:t}),we=({name:e,color:t,id:n})=>{const r=ve({tag:"div",classNames:["car__image","car__start-point"]});return r.style.backgroundColor=t,be({tag:"li",classNames:["cars-list__item","car"],children:[be({tag:"div",classNames:["control-buttons"],children:[he("select",{eventName:"click",callback:ne}),he("remove",{eventName:"click",callback:re}),he("start",{eventName:"click",callback:ie}),he("stop",{eventName:"click",callback:ae},["disabled","true"])]}),ve({tag:"div",classNames:["car__name"],innerText:e}),r,ve({tag:"div",classNames:["car__finish-point"]})],id:`${n}`})},_e=(e,t,n,r)=>{const o=document.createElement("tr");return o.append(...t.map(((t,o)=>{const i=document.createElement(e);return i.textContent=t,o===N.One&&(i.style.backgroundColor=n),void 0!==r&&i.classList.add(r[o]),i}))),o},Ee=()=>{const e=document.createElement("thead");return e.classList.add("table__head","head"),e.addEventListener("click",ue),e.append(_e("th",_,C,E)),e},Ae=e=>{const t=document.createElement("tbody");return t.append(...e.map(((e,t)=>_e("td",[`${t+N.One+(Z.winnersCurrentPage-N.One)*x}`,"",`${e.name}`,`${e.wins}`,`${e.time}`],e.color)))),t},Se=e=>be({tag:"table",classNames:["winners-list","table"],children:[Ee(),Ae(e)]});var Ce=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};(function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))})(void 0,void 0,void 0,(function*(){const e=yield W.getCars({_page:N.One,_limit:7}),t=yield W.getWinners({_page:N.One,_limit:x});return[Z.cars,Z.carsAmount]=[e.content,Number(e.totalAmount)],[Z.winners,Z.winnersAmount]=[t.content,Number(t.totalAmount)],[e,t]})).then((([e,t])=>Ce(void 0,void 0,void 0,(function*(){const n=yield Promise.all(t.content.map((e=>Ce(void 0,void 0,void 0,(function*(){return Object.assign(e,yield W.getCarById(String(e.id)))}))))),r=document.createElement("main");var o,i,a;r.append((o=e,i=Z.garageCurrentPage,a=Math.ceil(Z.carsAmount/7),be({tag:"section",id:"garage",classNames:["section","section_visible"],children:[be({tag:"div",classNames:["section__header"],children:[xe("create",{eventName:"submit",callback:ee}),xe("update",{eventName:"submit",callback:te}),he("race",{eventName:"click",callback:de}),he("reset",{eventName:"click",callback:le},["disabled","true"]),he("generate",{eventName:"click",callback:se})]}),ve({tag:"h2",classNames:["section__title","garage__title"],innerText:H("GARAGE",o.totalAmount)}),ve({tag:"div",classNames:["garage__page-number"],innerText:G(i)}),be({tag:"ul",classNames:["cars-list"],children:o.content.map((e=>we(e)))}),ye(me,i,a)]})),((e,t,n,r)=>be({tag:"section",id:"winners",classNames:["section"],children:[ve({tag:"h2",classNames:["section__title","winners__title"],innerText:H("WINNERS",t)}),ve({tag:"div",classNames:["winners__page-number"],innerText:G(n)}),Se(e),ye(pe,n,r)]}))(n,t.totalAmount,Z.garageCurrentPage,Math.ceil(Z.winnersAmount/x)));const s=be({tag:"header",classNames:["tabs"],children:[w.garage,w.winners].map(((e,t)=>{const n=ve({tag:"button",classNames:["tab-button"],innerText:e});return t===N.Zero&&n.classList.add("tab-button_active"),n})),listenerInfo:{eventName:"click",callback:ge}});document.body.append(s,r)}))))})()})();